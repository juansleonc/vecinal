<% @submenu_title = t('general.submenu.communities'); @submenu_item = 'communities' %>

<div class="inner-section col-lg-10 col-lg-offset-1 col-md-10 col-md-offset-2 col-sm-9 col-sm-offset-2 buildings-index">

  <div class="cm-nav-links">
    <%= link_to t('general.submenu.communities'), company_buildings_path(@company,query: params[:query], responsible: params[:responsible], order: params[:order], b: params[:b], c: params[:c]), class: 'active' %>

    <% if can? :create, Building %>
      <%= link_to '+ ' + t('general.create_record', record_name: Building.model_name.human), '#', class: 'btn btn-primary',
        data: { toggle: 'modal', target: '#new-building-modal' } %>
    <% end %>
  </div>
  <div class="under-tabs">
    <%= render 'shared/order_by_button', btn_text: ' AZ ' %>
  </div>

  <div class="cm-gallery-grid load-more-at-bottom" id="buildings" data-next-path="<%= @next_path %>">
    <%= render @company %>
    <%= render @buildings %>
  </div>
  
  <div class='content-pagination'>
    <%= page_entries_info @contacts %>
    <%= will_paginate @contacts, :renderer => 'LinkRenderer' %>
  </div>
</div>

<% if can? :create, Building %>
  <div class="modal fade form-new-object" id="new-building-modal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <h4 class="modal-title"><%= t('general.create_record', record_name: Building.model_name.human.capitalize) %></h4>
        </div>
        <div class="modal-body">
          <%= form_for [@company, @company.buildings.build], remote: true do |f| %>
            <div class="form-errors-container"></div>
            <%= f.hidden_field :subdomain %>

            <div class="form-group">
              <%= f.text_field :name, placeholder: t('activerecord.attributes.building.building_or_place_name'), class: 'form-control' %>
            </div>

            <div class="form-group">
              <%= f.text_field :country, placeholder: t('activerecord.attributes.building.country'), class: 'form-control' %>
            </div>
            <div class="form-group">
              <%= f.text_field :address, placeholder: t('activerecord.attributes.building.address'), class: 'form-control' %>
            </div>
            <div class="form-group">
              <%= f.text_field :city, placeholder: t('activerecord.attributes.building.city'), class: 'form-control' %>
            </div>
            <div class="form-group">
              <%= f.text_field :region, placeholder: t('activerecord.attributes.building.state_providence'), class: 'form-control' %>
            </div>
            <div class="form-group">
              <%= f.text_field :zip, placeholder: t('activerecord.attributes.building.zip'), class: 'form-control' %>
            </div>

            <div class="clearfix">
              <p class="notice">
                <%= t 'general.clicking_agree' %>
                <%= link_to t('general.privacy_policy'), send("privacy_#{I18n.locale.to_s}_path") %>
                <%= t 'general.and' %>
                <%= link_to t('general.terms_of_use'), send("terms_#{I18n.locale.to_s}_path") %>.
              </p>
              <%= f.submit t('general.next'), class: 'btn btn-primary new-building' %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
<% end %>


